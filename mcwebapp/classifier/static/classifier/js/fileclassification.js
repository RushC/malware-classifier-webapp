/**
 * This script containts the logic for classifying the uploaded file.
 * This script relies on the fileID variable from the filevalidation.js
 * script.
 */

/**
 * Called whenever the classify button is clicked. Sends a request to the
 * server to classify the uploaded file.
 *
 * This function is assumed to only be called when a file has already been
 * validated.
 */
function classifyFile() {
    
    // Make sure the file ID is not null (you can never be too careful).
    if (!window.fileID) {
        console.error('Classify button clicked without a set ID');
        return;
    }
    
    // Send a request to the server to classify the validated file.
    $.post('/classify', { ID: this.fileID }).done(classificationRequestAccepted)
                                            .error(classificationRequestRejected);
}

/**
 * Called whenever the request for the file classification is accepted by
 * the server. Clears the upload card and begins listening for and
 * displaying the progress of the classification.
 */
function classificationRequestAccepted() {
    console.log('accepted');
}

/**
 * Called whenever the request for the file classifcation is given an
 * error response. Indicates to the user that an error occured and allows
 * them to try again.
 */
function classificationRequestRejected() {
    console.log('rejected');
}